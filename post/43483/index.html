<!DOCTYPE html>
<html lang=cn>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="第01章 启程 Android系统架构 Android提供的东西 项目目录结构 日志工具Log   第02章 活动Activity 手动创建Activity 使用Intent在Activity间跳转 活动的生命周期 活动的启动模式 技巧   第03章 UI 控件 基本布局 自定义控件 难用的ListView 单位和尺寸 制作Nine-Patch图片   第04章 碎片Fragment 第">
<meta property="og:type" content="article">
<meta property="og:title" content="《第一行代码》读书笔记">
<meta property="og:url" content="http://blog.hatcloud.me/post/43483/index.html">
<meta property="og:site_name" content="雲里雾里">
<meta property="og:description" content="第01章 启程 Android系统架构 Android提供的东西 项目目录结构 日志工具Log   第02章 活动Activity 手动创建Activity 使用Intent在Activity间跳转 活动的生命周期 活动的启动模式 技巧   第03章 UI 控件 基本布局 自定义控件 难用的ListView 单位和尺寸 制作Nine-Patch图片   第04章 碎片Fragment 第">
<meta property="og:locale">
<meta property="article:published_time" content="2018-07-15T16:00:00.000Z">
<meta property="article:modified_time" content="2024-04-04T02:13:14.448Z">
<meta property="article:author" content="Hat_Cloud">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>《第一行代码》读书笔记</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="雲里雾里" type="application/atom+xml" />
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 7.1.1"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">主页</a></li><!--
     --><!--
       --><li><a href="/archives/">文章</a></li><!--
     --><!--
       --><li><a href="/photos/">照片</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     --><!--
       --><li><a href="/categories/">分类</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/post/901/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/post/30305/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://blog.hatcloud.me/post/43483/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://blog.hatcloud.me/post/43483/&text=《第一行代码》读书笔记"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://blog.hatcloud.me/post/43483/&is_video=false&description=《第一行代码》读书笔记"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=《第一行代码》读书笔记&body=Check out this article: http://blog.hatcloud.me/post/43483/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://blog.hatcloud.me/post/43483/&name=《第一行代码》读书笔记&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://blog.hatcloud.me/post/43483/&t=《第一行代码》读书笔记"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">第01章 启程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">Android系统架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">Android提供的东西</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">项目目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.</span> <span class="toc-text">日志工具Log</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">第02章 活动Activity</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.1.</span> <span class="toc-text">手动创建Activity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.2.</span> <span class="toc-text">使用Intent在Activity间跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.3.</span> <span class="toc-text">活动的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.4.</span> <span class="toc-text">活动的启动模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.4.1.</span> <span class="toc-text">standard</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.4.2.</span> <span class="toc-text">singleTop</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.4.3.</span> <span class="toc-text">singleTask</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.4.4.</span> <span class="toc-text">singleInstance</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.5.</span> <span class="toc-text">技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.5.1.</span> <span class="toc-text">隐藏标题栏</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.5.2.</span> <span class="toc-text">知晓当前是在哪一个活动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.5.3.</span> <span class="toc-text">随时随地地退出程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.5.4.</span> <span class="toc-text">启动活动的最佳写法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">第03章 UI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">控件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.2.</span> <span class="toc-text">基本布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.3.</span> <span class="toc-text">自定义控件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.3.1.</span> <span class="toc-text">引入布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.3.2.</span> <span class="toc-text">创建自定义控件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.4.</span> <span class="toc-text">难用的ListView</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.4.1.</span> <span class="toc-text">简单用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.4.2.</span> <span class="toc-text">定制ListView的界面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.4.3.</span> <span class="toc-text">提升ListView的效率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.4.4.</span> <span class="toc-text">ListView的点击事件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.5.</span> <span class="toc-text">单位和尺寸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.6.</span> <span class="toc-text">制作Nine-Patch图片</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">第04章 碎片Fragment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">第05章 广播Broadcast</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">5.1.</span> <span class="toc-text">接收系统广播</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.1.1.</span> <span class="toc-text">动态注册</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.1.2.</span> <span class="toc-text">静态注册</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">5.2.</span> <span class="toc-text">发送自定义广播</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.2.1.</span> <span class="toc-text">发送标准广播</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.2.2.</span> <span class="toc-text">发送有序广播</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.2.3.</span> <span class="toc-text">使用本地广播</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">第06章 数据持久化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">6.1.</span> <span class="toc-text">文件存储</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">6.1.1.</span> <span class="toc-text">将数据存储到文件中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">6.1.2.</span> <span class="toc-text">从文件中读取数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">6.2.</span> <span class="toc-text">SharedPreferences存储</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">6.2.1.</span> <span class="toc-text">将数据存储到SharePreferences中</span></a></li></ol></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        《第一行代码》读书笔记
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Hat_Cloud</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-07-15T16:00:00.000Z" class="dt-published" itemprop="datePublished">2018-07-16</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/Android/" rel="tag">Android</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <div class="toc">

<!-- toc -->

<ul>
<li><a href="#di-01-zhang-qi-cheng">第01章 启程</a><ul>
<li><a href="#android-xi-tong-jia-gou">Android系统架构</a></li>
<li><a href="#android-ti-gong-de-dong-xi">Android提供的东西</a></li>
<li><a href="#xiang-mu-mu-lu-jie-gou">项目目录结构</a></li>
<li><a href="#ri-zhi-gong-ju-log">日志工具Log</a></li>
</ul>
</li>
<li><a href="#di-02-zhang-huo-dong-activity">第02章 活动Activity</a><ul>
<li><a href="#shou-dong-chuang-jian-activity">手动创建Activity</a></li>
<li><a href="#shi-yong-intent-zai-activity-jian-tiao-zhuan">使用Intent在Activity间跳转</a></li>
<li><a href="#huo-dong-de-sheng-ming-zhou-qi">活动的生命周期</a></li>
<li><a href="#huo-dong-de-qi-dong-mo-shi">活动的启动模式</a></li>
<li><a href="#ji-qiao">技巧</a></li>
</ul>
</li>
<li><a href="#di-03-zhang-ui">第03章 UI</a><ul>
<li><a href="#kong-jian">控件</a></li>
<li><a href="#ji-ben-bu-ju">基本布局</a></li>
<li><a href="#zi-ding-yi-kong-jian">自定义控件</a></li>
<li><a href="#nan-yong-de-listview">难用的ListView</a></li>
<li><a href="#dan-wei-he-chi-cun">单位和尺寸</a></li>
<li><a href="#zhi-zuo-nine-patch-tu-pian">制作Nine-Patch图片</a></li>
</ul>
</li>
<li><a href="#di-04-zhang-sui-pian-fragment">第04章 碎片Fragment</a></li>
<li><a href="#di-05-zhang-guang-bo-broadcast">第05章 广播Broadcast</a><ul>
<li><a href="#jie-shou-xi-tong-guang-bo">接收系统广播</a></li>
<li><a href="#fa-song-zi-ding-yi-guang-bo">发送自定义广播</a></li>
</ul>
</li>
<li><a href="#di-06-zhang-shu-ju-chi-jiu-hua">第06章 数据持久化</a><ul>
<li><a href="#wen-jian-cun-chu">文件存储</a></li>
<li><a href="#sharedpreferences-cun-chu">SharedPreferences存储</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

</div>

<h2><span id="di-01-zhang-qi-cheng">第01章 启程</span><a href="#di-01-zhang-qi-cheng" class="header-anchor">#</a></h2><h3><span id="android-xi-tong-jia-gou">Android系统架构</span><a href="#android-xi-tong-jia-gou" class="header-anchor">#</a></h3><ul>
<li><p>Linux内核层（Linux Kernel）</p>
</li>
<li><p>系统运行层（Libraries，Android Runtime）</p>
</li>
<li><p>应用框架层（Application Framework）</p>
</li>
<li><p>应用层（Application）</p>
</li>
</ul>
<h3><span id="android-ti-gong-de-dong-xi">Android提供的东西</span><a href="#android-ti-gong-de-dong-xi" class="header-anchor">#</a></h3><ul>
<li><p>四大组件</p>
</li>
<li><p>Activity 活动</p>
</li>
<li><p>Service 服务</p>
</li>
<li><p>Broadcast Receiver 广播接收器</p>
</li>
<li><p>Content Provider 内容提供者</p>
</li>
<li><p>丰富的系统控件</p>
</li>
<li><p>SQLite数据库</p>
</li>
<li><p>地理位置定位</p>
</li>
<li><p>强大的多媒体</p>
</li>
<li><p>传感器</p>
</li>
</ul>
<h3><span id="xiang-mu-mu-lu-jie-gou">项目目录结构</span><a href="#xiang-mu-mu-lu-jie-gou" class="header-anchor">#</a></h3><ul>
<li><p>src：放代码</p>
</li>
<li><p>gen：存放自动生成的内容，R.java文件在这</p>
</li>
<li><p>assets：存放随应用打包的文件</p>
</li>
<li><p>bin：包含编译时自动产生的文件，包括没有签名的应用安装文件**.apk</p>
</li>
<li><p>libs：存放第三方的jar包 </p>
</li>
<li><p>res：存放项目中用到的图片（Drawable），布局（Layout），字符串（String），颜色（Color）等资源</p>
</li>
<li><p>AndroidManifest.xml：整个Android项目的配置文件，作用如下</p>
</li>
</ul>
<p>      - 注册应用中添加的四大组件</p>
<p>      - 声明应用所需的权限</p>
<p>      - 指定应用最低兼容版本和目标版本</p>
<ul>
<li>project.properties：通过一行代码指定编译应用时用的SDK版本</li>
</ul>
<h3><span id="ri-zhi-gong-ju-log">日志工具Log</span><a href="#ri-zhi-gong-ju-log" class="header-anchor">#</a></h3><ul>
<li><p>Log.v()：verbose，所有琐碎的信息</p>
</li>
<li><p>Log.d()：debug，调试信息</p>
</li>
<li><p>Log.i()：info，比较重要的信息</p>
</li>
<li><p>log.w()：warn，警告信息</p>
</li>
<li><p>log.e()：error，错误信息</p>
</li>
</ul>
<h2><span id="di-02-zhang-huo-dong-activity">第02章 活动Activity</span><a href="#di-02-zhang-huo-dong-activity" class="header-anchor">#</a></h2><blockquote>
<p>一种包含用户界面的组件，主要用于和用户进行交互</p>
</blockquote>
<h3><span id="shou-dong-chuang-jian-activity">手动创建Activity</span><a href="#shou-dong-chuang-jian-activity" class="header-anchor">#</a></h3><ul>
<li><p>添加一个继承了Activity类的class文件，并重写其onCreate()方法</p>
</li>
<li><p>创建和加载布局</p>
</li>
<li><p>在AndroidManifest.xml文件中注册</p>
</li>
</ul>
<h3><span id="shi-yong-intent-zai-activity-jian-tiao-zhuan">使用Intent在Activity间跳转</span><a href="#shi-yong-intent-zai-activity-jian-tiao-zhuan" class="header-anchor">#</a></h3><ul>
<li><p>显示Intent</p>
</li>
<li><p>隐式Intent：指定抽象的action和category，交由系统去找出合适的活动来启动</p>
</li>
<li><p>向下一个活动传递数据：intent.putExtra(“extra_data”, data);</p>
</li>
</ul>
<p>  intent.getStringExtra(“extra_data”)</p>
<ul>
<li>返回数据给上一个活动：startActivityForResult()</li>
</ul>
<h3><span id="huo-dong-de-sheng-ming-zhou-qi">活动的生命周期</span><a href="#huo-dong-de-sheng-ming-zhou-qi" class="header-anchor">#</a></h3><ul>
<li><p>返回栈 Back Stack</p>
</li>
<li><p>活动状态</p>
</li>
<li><p>运行状态：活动处在栈顶</p>
</li>
<li><p>暂停状态：活动不处于栈顶，但仍然可见</p>
</li>
<li><p>停止状态：活动不处于栈顶，且完全不可见</p>
</li>
<li><p>销毁状态：活动从栈中移除</p>
</li>
<li><p>活动的生存期</p>
</li>
<li><p>onCreate()</p>
</li>
<li><p>onStart()</p>
</li>
<li><p>onResume()</p>
</li>
<li><p>onPause()</p>
</li>
<li><p>onStop()</p>
</li>
<li><p>onDestroy()</p>
</li>
<li><p>onRestart()</p>
</li>
<li><p>onSaveInstanceState() 使用该方法在活动实例被回收前保存数据</p>
</li>
</ul>
<h3><span id="huo-dong-de-qi-dong-mo-shi">活动的启动模式</span><a href="#huo-dong-de-qi-dong-mo-shi" class="header-anchor">#</a></h3><blockquote>
<p>启动模式一共有四种：standard，singleTop，singleTask，singleInstance，可以在AndroidManifest.xml中通过给<activity>标签指定android:launchMode属性来指定启动模式</activity></p>
</blockquote>
<h4><span id="standard">standard</span><a href="#standard" class="header-anchor">#</a></h4><blockquote>
<p>standard是活动默认的启动方式，采用standard启动方式的Activity在每次启动时都会创建一个新的实例在返回栈中入栈，即使这个活动已经有实例在栈中了。</p>
</blockquote>
<h4><span id="singletop">singleTop</span><a href="#singletop" class="header-anchor">#</a></h4><blockquote>
<p>当活动的启动模式指定为singleTop时，在启动活动时如果发现返回栈顶已经是该活动，则认为可以直接使用它，而不会再创建新的活动实例。</p>
</blockquote>
<h4><span id="singletask">singleTask</span><a href="#singletask" class="header-anchor">#</a></h4><blockquote>
<p>当活动的启动模式被指定为singleTask，当活动被启动的时候，系统会检测返回栈中是否存在该活动，如果存在，则直接使用它并将该活动之上的所有活动通通弹出返回栈，假如没有，则将创建新的实例。</p>
</blockquote>
<h4><span id="singleinstance">singleInstance</span><a href="#singleinstance" class="header-anchor">#</a></h4><blockquote>
<p>实现较为复杂。指定为singleInstance的活动会启用一个新的返回栈来管理这个活动。</p>
</blockquote>
<h3><span id="ji-qiao">技巧</span><a href="#ji-qiao" class="header-anchor">#</a></h3><h4><span id="yin-cang-biao-ti-lan">隐藏标题栏</span><a href="#yin-cang-biao-ti-lan" class="header-anchor">#</a></h4><p>在加载布局前加入代码 requestWIndowsFeature(Windows.FEATURE_NO_TITLE)</p>
<h4><span id="zhi-xiao-dang-qian-shi-zai-na-yi-ge-huo-dong">知晓当前是在哪一个活动</span><a href="#zhi-xiao-dang-qian-shi-zai-na-yi-ge-huo-dong" class="header-anchor">#</a></h4><p>在项目中创建一个继承自Activity的BaseActivity，然后重写BaseActivity的onCreate()方法，在其中加入一行“Log.d(“BaseActivity”, getClass().getSimpleName());”。</p>
<p>然后让项目中所有其他的Activity都继承自BaseActivity。</p>
<h4><span id="sui-shi-sui-di-di-tui-chu-cheng-xu">随时随地地退出程序</span><a href="#sui-shi-sui-di-di-tui-chu-cheng-xu" class="header-anchor">#</a></h4><p>新建一个ActivityCollector类作为活动管理器，代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class ActivityCollector &#123;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">public static List&lt;Activity&gt; activities = new ArrayList&lt;Activity&gt;();</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">public static void addActivity(Activity activity) &#123;</span><br><span class="line"></span><br><span class="line">activities.add(activity);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">public static void removeActivity(Activity activity) &#123;</span><br><span class="line"></span><br><span class="line">activities.remove(activity);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">public static void finishAll() &#123;</span><br><span class="line"></span><br><span class="line">for (Activity activity : activities) &#123;</span><br><span class="line"></span><br><span class="line">if (!activity.isFinishing()) &#123;</span><br><span class="line"></span><br><span class="line">activity.finish();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>创建继承自Activity的BaseActivity类（可以喝上一条中的BaseActivity一起写），如下所示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class BaseActivity extends Activity &#123;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line"></span><br><span class="line">super.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">Log.d(&quot;BaseActivity&quot;, getClass().getSimpleName());</span><br><span class="line"></span><br><span class="line">ActivityCollector.addActivity(this);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">protected void onDestroy() &#123;</span><br><span class="line"></span><br><span class="line">super.onDestroy();</span><br><span class="line"></span><br><span class="line">ActivityCollector.removeActivity(this);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>以后不管在什么地方想退出程序只要调用ActivityCollector.finishAll()方法就可以了。</p>
<h4><span id="qi-dong-huo-dong-de-zui-jia-xie-fa">启动活动的最佳写法</span><a href="#qi-dong-huo-dong-de-zui-jia-xie-fa" class="header-anchor">#</a></h4><p>在SecondActivity中加入如下方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public static void actionStart(Context context, String data1, String data2) &#123;</span><br><span class="line"></span><br><span class="line">Intent intent = new Intent(context, SecondActivity.class);</span><br><span class="line"></span><br><span class="line">intent.putExtra(&quot;param1&quot;, data1);</span><br><span class="line"></span><br><span class="line">intent.putExtra(&quot;param2&quot;, data2);</span><br><span class="line"></span><br><span class="line">context.startActivity(intent);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这样，在其他活动中只要输入如下一行代码就可以启动SecondActivity: </p>
<p><code>SecondActivity.actionStart(FirstActivity.this, &quot;data1&quot;, &quot;data2&quot;);</code></p>
<h2><span id="di-03-zhang-ui">第03章 UI</span><a href="#di-03-zhang-ui" class="header-anchor">#</a></h2><h3><span id="kong-jian">控件</span><a href="#kong-jian" class="header-anchor">#</a></h3><ul>
<li><p>TextVIew</p>
</li>
<li><p>Button</p>
</li>
</ul>
<p>(<a target="_blank" rel="noopener" href="http://blog.csdn.net/a9529lty/article/details/7542828">Android开发之onClick事件的三种写法</a>)</p>
<ul>
<li><p>EditText</p>
</li>
<li><p>ImageView</p>
</li>
<li><p>ProgressBar</p>
</li>
<li><p>AlertDialog</p>
</li>
<li><p>ProgressDialog</p>
</li>
<li><p>ListView</p>
</li>
</ul>
<h3><span id="ji-ben-bu-ju">基本布局</span><a href="#ji-ben-bu-ju" class="header-anchor">#</a></h3><ul>
<li>LinearLayout</li>
</ul>
<p>(巧妙的使用android:layout_weight属性可以有效的布局控件。)</p>
<ul>
<li><p>RelativeLayout</p>
</li>
<li><p>FrameLayout</p>
</li>
<li><p>TableLayout</p>
</li>
</ul>
<h3><span id="zi-ding-yi-kong-jian">自定义控件</span><a href="#zi-ding-yi-kong-jian" class="header-anchor">#</a></h3><h4><span id="yin-ru-bu-ju">引入布局</span><a href="#yin-ru-bu-ju" class="header-anchor">#</a></h4><p>在Layout目录下新建一个xml布局文件，在新建布局中写好自定义的布局。比如我们新建了一个名为title.xml的布局，现在我们只要在其他布局中输入代码 <include layout="“@layout/title”">即可引入title.xml中的布局。</include></p>
<h4><span id="chuang-jian-zi-ding-yi-kong-jian">创建自定义控件</span><a href="#chuang-jian-zi-ding-yi-kong-jian" class="header-anchor">#</a></h4><p>新建一个继承自LinearLayout的类TitleLayout.class，并重写构造函数。在构造函数中调用 <code>LayoutInflater.from(context).inflate(R.layout.title, this);</code>这一行代码，引入自定义控件的布局。在xml布局中调用该自定义控件的方法和调用其他系统空间一样，但要在自定义控件的类名前加完整的包名，比如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;com.example.uicustomviews.TitleLayout</span><br><span class="line"></span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line"></span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/com.example.uicustomviews.TitleLayout&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3><span id="nan-yong-de-listview">难用的ListView</span><a href="#nan-yong-de-listview" class="header-anchor">#</a></h3><h4><span id="jian-dan-yong-fa">简单用法</span><a href="#jian-dan-yong-fa" class="header-anchor">#</a></h4><ol>
<li><p>在布局中加入<listview>控件</listview></p>
</li>
<li><p>在Activity中新建一个ArrayAdapter适配器</p>
</li>
<li><p>使用listView.setAdapter()方法来为ListView设定适配器</p>
</li>
</ol>
<h4><span id="ding-zhi-listview-de-jie-mian">定制ListView的界面</span><a href="#ding-zhi-listview-de-jie-mian" class="header-anchor">#</a></h4><ol>
<li><p>定义实体类Fruit，Fruit类中有两个字段：name，imageId</p>
</li>
<li><p>在layout目录下新建fruit_item.xml，布局中包含一个ImageVIew和TextView</p>
</li>
<li><p>创建一个自定义的适配器，这个适配器继承自ArrayAdapter，并将泛型指定为Fruit类，新建类FruitAdapter。public class FruitAdapter extends ArrayAdapter<fruit>{}</fruit></p>
</li>
<li><p>重写自定义适配器FruitAdapter的一组构造函数以及getView()方法</p>
</li>
<li><p>在代码中使用setAdapter()方法来使用自定义的适配器</p>
</li>
</ol>
<h4><span id="ti-sheng-listview-de-xiao-lu">提升ListView的效率</span><a href="#ti-sheng-listview-de-xiao-lu" class="header-anchor">#</a></h4><ol>
<li><p>convertView是之前加载好的布局的缓存，使用它可以减少ListView加载布局的次数</p>
</li>
<li><p>使用一个自定义的类ViewHolder来防止ListView重复获取空间的实例</p>
</li>
</ol>
<p>代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">public View getView(int position, View convertView, ViewGroup parent) &#123;</span><br><span class="line"></span><br><span class="line">Fruit fruit = getItem(position);</span><br><span class="line"></span><br><span class="line">View view;</span><br><span class="line"></span><br><span class="line">ViewHolder viewHolder;</span><br><span class="line"></span><br><span class="line">if (convertView == null) &#123;</span><br><span class="line"></span><br><span class="line">view = LayoutInflater.from(getContext()).inflate(resourceId, null);</span><br><span class="line"></span><br><span class="line">viewHolder = new ViewHolder();</span><br><span class="line"></span><br><span class="line">viewHolder.fruitImage = (ImageView) view.findViewById(R.id.fruit_image);</span><br><span class="line"></span><br><span class="line">viewHolder.fruitName = (TextView) view.findViewById(R.id.fruit_name);</span><br><span class="line"></span><br><span class="line">view.setTag(viewHolder);</span><br><span class="line"></span><br><span class="line">&#125; else &#123;</span><br><span class="line"></span><br><span class="line">view = convertView;</span><br><span class="line"></span><br><span class="line">viewHolder = (ViewHolder) view.getTag();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">viewHolder.fruitImage.setImageResource(fruit.getImageId());</span><br><span class="line"></span><br><span class="line">viewHolder.fruitName.setText(fruit.getName());</span><br><span class="line"></span><br><span class="line">return view;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4><span id="listview-de-dian-ji-shi-jian">ListView的点击事件</span><a href="#listview-de-dian-ji-shi-jian" class="header-anchor">#</a></h4><h3><span id="dan-wei-he-chi-cun">单位和尺寸</span><a href="#dan-wei-he-chi-cun" class="header-anchor">#</a></h3><p>Android中的密度就是屏幕每英寸包含的像素数，通常以dpi为单位。比如一个手机的屏幕的宽是2英寸，长是3英寸，如果它的分辨率是320*480，那么这个屏幕的密度就是160dpi。</p>
<p>要获取当前屏幕的密度的代码为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">float xdpi = getResources().getDisplayMetrics().xdpi;</span><br><span class="line"></span><br><span class="line">float ydpi = getResources().getDisplayMetrics().ydpi;</span><br><span class="line"></span><br><span class="line">Log.d(&quot;MainActivity&quot;, &quot;xdpi is &quot; + xdpi);</span><br><span class="line"></span><br><span class="line">Log.d(&quot;MainActivity&quot;, &quot;ydpi is &quot; + ydpi);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>根据Android规定，在160dpi的屏幕上，1dp &#x3D; 1px。</p>
<h3><span id="zhi-zuo-nine-patch-tu-pian">制作Nine-Patch图片</span><a href="#zhi-zuo-nine-patch-tu-pian" class="header-anchor">#</a></h3><h2><span id="di-04-zhang-sui-pian-fragment">第04章 碎片Fragment</span><a href="#di-04-zhang-sui-pian-fragment" class="header-anchor">#</a></h2><p>碎片是一种可以嵌入在活动中的UI片段，它能让程序更加合理和充分地利用大屏幕的空间，因为在平板上应用非常广泛。</p>
<h2><span id="di-05-zhang-guang-bo-broadcast">第05章 广播Broadcast</span><a href="#di-05-zhang-guang-bo-broadcast" class="header-anchor">#</a></h2><p>Android提供一套完整的API，允许应用程序自由的发送和接收广播，发送广播是借助Intent，而接收广播，则是靠“广播接收器Broadcast Receiver”。</p>
<p>Android中的广播分为两种：标准广播和有序广播。</p>
<p>标准广播是异步的，所有接收器会同一时间收到，所以无法被拦截。</p>
<p>有序广播则是一种同步执行的广播，广播发出后，同一时间只有一个广播接收器收到这条广播消息，当这个广播接收器中的逻辑执行完成后才回继续传递。优先级高的接收器可以拦截有序广播。</p>
<h3><span id="jie-shou-xi-tong-guang-bo">接收系统广播</span><a href="#jie-shou-xi-tong-guang-bo" class="header-anchor">#</a></h3><p>注册广播的方式有两种，在代码中注册和在AndroidManifest.xml中注册，前者被称为动态注册，后者被称为静态注册。</p>
<h4><span id="dong-tai-zhu-ce">动态注册</span><a href="#dong-tai-zhu-ce" class="header-anchor">#</a></h4><p>如何创建一个广播接收器：新建一个类，让它继承自BroadcastReceiver并重写父类的onReceive()方法就行了。</p>
<p>动态注册的代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line"></span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    intentFilter = new IntentFilter();</span><br><span class="line"></span><br><span class="line">    intentFilter.addAction(&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;);</span><br><span class="line"></span><br><span class="line">    networkChangeReceiver = new NetworkChangeReceiver();</span><br><span class="line"></span><br><span class="line">    registerReceiver(networkChangeReceiver, intentFilter);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">class NetworkChangeReceiver extends BroadcastReceiver &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line"></span><br><span class="line">    public void onReceive(Context context, Intent intent) &#123;</span><br><span class="line"></span><br><span class="line">        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);</span><br><span class="line"></span><br><span class="line">        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();</span><br><span class="line"></span><br><span class="line">        if ((networkInfo != null) &amp;&amp; (networkInfo.isAvailable())) &#123;</span><br><span class="line"></span><br><span class="line">            Toast.makeText(context, &quot;Network is available.&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">        &#125; else &#123;</span><br><span class="line"></span><br><span class="line">            Toast.makeText(context, &quot;Network is unavailable.&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4><span id="jing-tai-zhu-ce">静态注册</span><a href="#jing-tai-zhu-ce" class="header-anchor">#</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> &lt;receiver android:name=&quot;.BootCompleteReceiver&quot; &gt;</span><br><span class="line"></span><br><span class="line">    &lt;intent-filter&gt;</span><br><span class="line"></span><br><span class="line">        &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/intent-filter&gt;</span><br><span class="line"></span><br><span class="line">&lt;/receiver&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3><span id="fa-song-zi-ding-yi-guang-bo">发送自定义广播</span><a href="#fa-song-zi-ding-yi-guang-bo" class="header-anchor">#</a></h3><h4><span id="fa-song-biao-zhun-guang-bo">发送标准广播</span><a href="#fa-song-biao-zhun-guang-bo" class="header-anchor">#</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Intent intent = new Intent(&quot;com.jeff.broadcasttest.MY_BROADCAST&quot;);</span><br><span class="line"></span><br><span class="line">sendBroadcast(intent);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4><span id="fa-song-you-xu-guang-bo">发送有序广播</span><a href="#fa-song-you-xu-guang-bo" class="header-anchor">#</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Intent intent = new Intent(&quot;com.jeff.broadcasttest.MY_BROADCAST&quot;);</span><br><span class="line"></span><br><span class="line">sendOrderedBroadcast(intent, null);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4><span id="shi-yong-ben-di-guang-bo">使用本地广播</span><a href="#shi-yong-ben-di-guang-bo" class="header-anchor">#</a></h4><p>本地广播只能在应用内部传递，不会被其他应用的接收器接收到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class MainActivity extends Activity &#123;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">private IntentFilter intentFilter;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">private LocalReceiver localReceiver;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">private LocalBroadcastManager localBroadcastManager;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line"></span><br><span class="line">super.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">localBroadcastManager = LocalBroadcastManager.getInstance(this);</span><br><span class="line"></span><br><span class="line">Button button = (Button) findViewById(R.id.button);</span><br><span class="line"></span><br><span class="line">button.setOnClickListener(new OnClickListener() &#123;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">public void onClick(View v) &#123;</span><br><span class="line"></span><br><span class="line">Intent intent = new Intent(</span><br><span class="line"></span><br><span class="line">&quot;com.example.broadcasttest.LOCAL_BROADCAST&quot;);</span><br><span class="line"></span><br><span class="line">localBroadcastManager.sendBroadcast(intent);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">intentFilter = new IntentFilter();</span><br><span class="line"></span><br><span class="line">intentFilter.addAction(&quot;com.example.broadcasttest.LOCAL_BROADCAST&quot;);</span><br><span class="line"></span><br><span class="line">localReceiver = new LocalReceiver();</span><br><span class="line"></span><br><span class="line">localBroadcastManager.registerReceiver(localReceiver, intentFilter);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">protected void onDestroy() &#123;</span><br><span class="line"></span><br><span class="line">super.onDestroy();</span><br><span class="line"></span><br><span class="line">localBroadcastManager.unregisterReceiver(localReceiver);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">class LocalReceiver extends BroadcastReceiver &#123;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">public void onReceive(Context context, Intent intent) &#123;</span><br><span class="line"></span><br><span class="line">Toast.makeText(context, &quot;received local broadcast&quot;,</span><br><span class="line"></span><br><span class="line">Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="di-06-zhang-shu-ju-chi-jiu-hua">第06章 数据持久化</span><a href="#di-06-zhang-shu-ju-chi-jiu-hua" class="header-anchor">#</a></h2><h3><span id="wen-jian-cun-chu">文件存储</span><a href="#wen-jian-cun-chu" class="header-anchor">#</a></h3><h4><span id="jiang-shu-ju-cun-chu-dao-wen-jian-zhong">将数据存储到文件中</span><a href="#jiang-shu-ju-cun-chu-dao-wen-jian-zhong" class="header-anchor">#</a></h4><p>Context类中提供了一个openFileOutput()方法，可用于将数据存储到指定文件中。这个方法有两个参数，</p>
<p>第一个参数是文件名，注意这个指定的文件名不能包含路径，因为所有文件默认都保存在&#x2F;data&#x2F;data&#x2F;<package name>&#x2F;files&#x2F;中</package></p>
<p>第二个参数是文件的操作模式主要有两种模式可选</p>
<p>MODE_PRIVATE：默认的操作模式，表示当指定同样文件名的时候，所写入的内容会覆盖原文件中的内容</p>
<p>MODE_APPEND：如果已存在同文件名文件则将写入内容追加到该文件后面，如果不存在，则创建新文件。</p>
<p>这个类返回的是FileOutputStream对象</p>
<p>示例代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public void save(String data) &#123;</span><br><span class="line"></span><br><span class="line">    FileOutputStream out = null;</span><br><span class="line"></span><br><span class="line">    BufferedWriter writer = null;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line"></span><br><span class="line">        out = openFileOutput(&quot;data&quot;, Context.MODE_PRIVATE);</span><br><span class="line"></span><br><span class="line">        writer = new BufferedWriter(new OutputStreamWriter(out));</span><br><span class="line"></span><br><span class="line">        writer.write(data);</span><br><span class="line"></span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line"></span><br><span class="line">        e.printStackTrace();</span><br><span class="line"></span><br><span class="line">    &#125; finally &#123;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line"></span><br><span class="line">            if (writer != null) &#123;</span><br><span class="line"></span><br><span class="line">                writer.close();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line"></span><br><span class="line">            e.printStackTrace();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4><span id="cong-wen-jian-zhong-du-qu-shu-ju">从文件中读取数据</span><a href="#cong-wen-jian-zhong-du-qu-shu-ju" class="header-anchor">#</a></h4><p>Context提供了一个openFileInput()方法，可以从文件中读取数据，它自由一个参数，就是要读取的文件名，返回的是一个FileInputStream对象</p>
<p>示例代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public String load() &#123;</span><br><span class="line"></span><br><span class="line">    FileInputStream in = null;</span><br><span class="line"></span><br><span class="line">    BufferedReader reader = null;</span><br><span class="line"></span><br><span class="line">    StringBuilder content = new StringBuilder();</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line"></span><br><span class="line">        in = openFileInput(&quot;data&quot;);</span><br><span class="line"></span><br><span class="line">        reader = new BufferedReader(new InputStreamReader(in));</span><br><span class="line"></span><br><span class="line">        String line = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">        while ((line = reader.readLine()) != null) &#123;</span><br><span class="line"></span><br><span class="line">            content.append(line);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line"></span><br><span class="line">        e.printStackTrace();</span><br><span class="line"></span><br><span class="line">    &#125; finally &#123;</span><br><span class="line"></span><br><span class="line">        if (reader != null) &#123;</span><br><span class="line"></span><br><span class="line">            try &#123;</span><br><span class="line"></span><br><span class="line">                reader.close();</span><br><span class="line"></span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line"></span><br><span class="line">                e.printStackTrace();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return content.toString();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3><span id="sharedpreferences-cun-chu">SharedPreferences存储</span><a href="#sharedpreferences-cun-chu" class="header-anchor">#</a></h3><h4><span id="jiang-shu-ju-cun-chu-dao-sharepreferences-zhong">将数据存储到SharePreferences中</span><a href="#jiang-shu-ju-cun-chu-dao-sharepreferences-zhong" class="header-anchor">#</a></h4><p>Android中主要提供了三种方法用于得到SharedPreferences对象。</p>
<ul>
<li><p>Context类中的getSharePreferences()方法</p>
</li>
<li><p>Activity类中的getPreference()方法</p>
</li>
<li><p>PreferenceManager类中的getDefaultSharedPreferences()方法</p>
</li>
</ul>
<p>主要可以分为三步实现</p>
<ol>
<li><p>调用SharedPreferences对象的edit()方法来获取一个SharedPreferences.Editor对象。</p>
</li>
<li><p>向SharedPreferences.Editor对象中添加数据，比如一个布尔型数据就用putBoolean()方法，以此类推</p>
</li>
<li><p>调用commit()方法将添加的数据提交，从而完成数据存储操作</p>
</li>
</ol>
<p>示例如下：</p>
<p>    public void onClickSaveData(View view) {</p>
<p>        SharedPreferences.Editor editor &#x3D; getSharedPreferences(“data”, MODE_PRIVATE).edit();</p>
<p>        editor.putString(“name”, “Tome”);</p>
<p>        editor.putInt(“Age”, 28);</p>
<p>        editor.putBoolean(“Married”, false);</p>
<p>        editor.commit();</p>
<p>    }</p>
<ul>
<li>从SharedPreferences中读取数据</li>
</ul>
<p>比较简单，示例代码如下：</p>
<p>    public void onClickRestoreData(View view) {</p>
<p>        SharedPreferences pref &#x3D; getSharedPreferences(“data”, MODE_PRIVATE);</p>
<p>        String name &#x3D; pref.getString(“Name”, “”);</p>
<p>        int age &#x3D; pref.getInt(“Age”, 0);</p>
<p>        boolean maried &#x3D; pref.getBoolean(“Married”, false);</p>
<p>        Log.d(“MainActivity”, “name is “ + name);</p>
<p>        Log.d(“MainActivity”, “age is “ + age);</p>
<p>        Log.d(“MainActivity”, “married is “ + maried);</p>
<p>    }</p>
<ul>
<li><p>SQLite数据库存储</p>
</li>
<li><p>调试说明</p>
</li>
</ul>
<p>在File Explorer中时无法查看数据库的具体内容的，所以我们要使用adb来帮助我们调试</p>
<p>首先我们打开命令行工具中，然后可以使用如下命令</p>
<p>ab shell ：进入设备的控制台了，这时候我们可以用cd命令来进入到&#x2F;data&#x2F;data&#x2F;<package name>&#x2F;databases&#x2F;目录下，然后可以查看数据库文件</package></p>
<p>sqlite3 数据库名：打开数据库，并可以在里面使用一些命令来查看操作数据库</p>
<p>.table：查看有哪些表</p>
<p>.schema：查看表的建表语句</p>
<p>.quit&#x2F;.exit：退出数据库的编辑</p>
<p>select等SQL通用命令，这些命令最后记得添加分号；</p>
<p>exit：退出设备控制台</p>
<ul>
<li>创建数据库</li>
</ul>
<p>Android中专门提供了一个SQLiteOpenHelper帮助类，借助这个类，我们可以非常简单的对数据库进行创建和升级。</p>
<p>SQLiteOpenHelper是一个抽象类，所以我们要使用它的时候必须自己创建一个帮助类去继承它，而且我们必须在自己的帮助类里面重写SQLiteOpenHelper的两个抽象方法：onCreate()和onUpgrade()。</p>
<p>SQLiteOpenHelper还有两个非常重要的示例方法，分别是getReadableDatabase()和getWritableDatabase()。这两个方法都能创建或打开一个数据库并返回一个可对数据库进行读写的对象。不同的是，当数据库不可写入（磁盘满了）getReadableDatabase()方法返回的对象将以只读的方式去打开数据库，而getWritableDatabase()方法则将出现异常。</p>
<p>SQLiteOpenHelper中有两个构造方法可以重写，一般使用参数少点的那个构造方法即可。这个构造函数接收四个参数：</p>
<ol>
<li>Context</li>
</ol>
<p>2.  数据库名</p>
<p>3.  第三个参数允许我们在查询数据库时返回一个自定义的Cursor，一般传入null</p>
<ol start="4">
<li>当前数据库的版本号</li>
</ol>
<p>示例代码如下：</p>
<p>public class MyDatabaseHelper extends SQLiteOpenHelper {</p>
<p>    public static final String CREATE_BOOK &#x3D; “create table Book (“</p>
<p>            + “id integer primary key autoincrement,”</p>
<p>            + “author text,”</p>
<p>            + “price real,”</p>
<p>            + “pages integer,”</p>
<p>            + “name text)”;</p>
<p>    public static final String CREATE_CATEGORY &#x3D; “create table Category (“</p>
<p>            + “id integer primary key autoincrement,”</p>
<p>            + “category_name text,”</p>
<p>            + “category_code integer)”;</p>
<p>    private Context mContext;</p>
<p>    public MyDatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {</p>
<p>        super(context, name, factory, version);</p>
<p>        mContext &#x3D; context;</p>
<p>    }</p>
<p>    @Override</p>
<p>    public void onCreate(SQLiteDatabase db) {</p>
<p>        db.execSQL(CREATE_BOOK);</p>
<p>        db.execSQL(CREATE_CATEGORY);</p>
<p>        Toast.makeText(mContext, “Create succeeded”, Toast.LENGTH_SHORT).show();</p>
<p>    }</p>
<p>    @Override</p>
<p>    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {</p>
<p>        db.execSQL(“drop table if exists Book”);</p>
<p>        db.execSQL(“drop table if exists Category”);</p>
<p>        onCreate(db);</p>
<p>    }</p>
<p>}</p>
<p>然后在MainActivity中写入：</p>
<p>    public void onClickCreateDatabase(View view) {</p>
<p>        dbHelper.getWritableDatabase();</p>
<p>    }</p>
<ul>
<li>升级数据库</li>
</ul>
<p>参见上一条的示例代码</p>
<ul>
<li>添加数据</li>
</ul>
<p>Android特有方法：</p>
<p>    public void onClickAddData(View view) {</p>
<p>        SQLiteDatabase db &#x3D; dbHelper.getWritableDatabase();</p>
<p>        ContentValues values &#x3D; new ContentValues();</p>
<p>        values.put(“name”, “The Da Vinci Code”);</p>
<p>        values.put(“author”, “Dan Brown”);</p>
<p>        values.put(“pages”, 454);</p>
<p>        values.put(“price”, 16.96);</p>
<p>        db.insert(“Book”, null, values);</p>
<p>        values.clear();</p>
<p>        values.put(“name”, “The Lost Symbol”);</p>
<p>        values.put(“author”, “TDan Brown”);</p>
<p>        values.put(“pages”, 510);</p>
<p>        values.put(“price”, 19.95);</p>
<p>        db.insert(“Book”, null, values);</p>
<p>    }</p>
<p>SQL语句：</p>
<p>db.execSQL(“insert into Book (name, author, pages, price) values(?, ?, ?, ?)”,</p>
<p>                    new String[]{“Game of Thrones”, “George Martin”, “720”, “20.85”});</p>
<ul>
<li>更新数据</li>
</ul>
<p>Android特有方法：</p>
<p>public void onClickUpdateData(View view) {</p>
<p>        SQLiteDatabase db &#x3D; dbHelper.getWritableDatabase();</p>
<p>        ContentValues values &#x3D; new ContentValues();</p>
<p>        values.put(“price”, 10.99);</p>
<p>        db.update(“Book”, values, “name &#x3D; ?”, new String[]{“The Da Vinci Code”});</p>
<p>    }</p>
<p>SQL语句：</p>
<p>db.execSQL(“update Book set price &#x3D; ? where name &#x3D; ?”, new String[]{“10.99”, “The Da Vinci Code”});</p>
<ul>
<li>删除数据</li>
</ul>
<p>Android特有方法：</p>
<p>public void onClickDeleteData(View view) {</p>
<p>        SQLiteDatabase db &#x3D; dbHelper.getWritableDatabase();</p>
<p>        db.delete(“book”, “pages &lt; ?”, new String[]{“500”});</p>
<p>    }</p>
<p>SQL语句：</p>
<p>    db.execSQL(“delete from Book where pages &lt; ?”, new String[]{“500”});</p>
<ul>
<li>查询数据</li>
</ul>
<p>查询是最为复杂的，SQLiteDatabase实例提供的querry()方法有整整七个参数，其具体情况如下所示：</p>
<p>table：指定查询的表名 from table_name</p>
<p>columns：指定查询的列名 select column1,column2</p>
<p>selection：指定where的hue条件 where column &#x3D; value</p>
<p>shectionArgs：为where中的占位符提供具体的值 -</p>
<p>groupBy：指定需要group by的列 group by column</p>
<p>having：对group by后的结果进一步约束 having column &#x3D; value</p>
<p>orderBy：指定查询结果的排序方式 order by column1,column2</p>
<p>简单例子的示例代码如下：</p>
<p>public void onClickQueryData(View view) {</p>
<p>        SQLiteDatabase db &#x3D; dbHelper.getWritableDatabase();</p>
<p>        Cursor cursor &#x3D; db.query(“Book”, null, null, null, null, null, null);</p>
<p>        if (cursor.moveToFirst()) {</p>
<p>            do {</p>
<p>                String name &#x3D; cursor.getString(cursor.getColumnIndex(“name”));</p>
<p>                String author &#x3D; cursor.getString(cursor.getColumnIndex(“author”));</p>
<p>                int pages &#x3D; cursor.getInt(cursor.getColumnIndex(“pages”));</p>
<p>                double price &#x3D; cursor.getDouble(cursor.getColumnIndex(“price”));</p>
<p>                Log.d(“MainActivity”, “Book’s name is “ + name);</p>
<p>                Log.d(“MainActivity”, “Book’s author is “ + author);</p>
<p>                Log.d(“MainActivity”, “Book’s pages are “ + pages);</p>
<p>                Log.d(“MainActivity”, “Book’s price is “ + price);</p>
<p>            } while (cursor.moveToNext());</p>
<p>        }</p>
<p>        cursor.close();</p>
<p>    }</p>
<p>SQL语句：</p>
<p>    db.rawQuery(“select * from Book”, null);</p>
<ul>
<li><p>技巧</p>
</li>
<li><p>使用事务</p>
</li>
</ul>
<p>使用事务能能保证一系列任务能全部完成或者都不完成。</p>
<p>    public void onClickReplaceData(View view) {</p>
<p>        SQLiteDatabase db &#x3D; dbHelper.getWritableDatabase();</p>
<p>        db.beginTransaction();</p>
<p>        try {</p>
<p>            db.execSQL(“delete from Book”);</p>
<p>            &#x2F;*if (true) {</p>
<p>                throw new NullPointerException();</p>
<p>            }*&#x2F;</p>
<p>            db.execSQL(“insert into Book (name, author, pages, price) values(?, ?, ?, ?)”,</p>
<p>                    new String[]{“Game of Thrones”, “George Martin”, “720”, “20.85”});</p>
<p>            db.setTransactionSuccessful();</p>
<p>        } catch (Exception e) {</p>
<p>            e.printStackTrace();</p>
<p>        } finally {</p>
<p>            db.endTransaction();</p>
<p>        }</p>
<p>    }</p>
<ul>
<li>升级数据库的最佳写法</li>
</ul>
<p>详细见P263页，摘要代码如下：</p>
<p>@Override</p>
<p>public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {</p>
<p>        switch (oldVersion) {</p>
<p>            case 1:</p>
<p>                db.execSQL(“CREATE_CATEGORY”);</p>
<p>            case 2:</p>
<p>                db.execSQL(“alter table Book add column category_id integer”);</p>
<p>            default:</p>
<ul>
<li><p>技巧</p>
</li>
<li><p>TextUtils.isEmpty( String str)</p>
</li>
</ul>
<p>TextUtils.isEmpty()方法能一次进行两次控制判断，当传入的字符串等于null或者空字符串时，这个方法都会返回true。</p>
<ul>
<li><p>第07章 内容提供器Content Provider</p>
</li>
<li><p>访问其他程序中的数据</p>
</li>
<li><p>ContentResolver</p>
</li>
</ul>
<p>Android中是借用ContentResolver类来访问内容提供器中的数据，可以通过Context中的getContentResolver()的方法来获取该类的实例。</p>
<p>ContentResolver中提供了如下方法用于对数据的CRUD操作。</p>
<p>public Uri insert(Uri uri, ContentValues values) 返回增加的数据的Uri地址</p>
<p>public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) 返回更新的数据的ID</p>
<p>public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) </p>
<p>public int delete(Uri uri, String selection, String[] selectionArgs) 返回删除的数据的ID</p>
<ul>
<li>URI</li>
</ul>
<p>内容URI给内容提供器中的数据建立的唯一的标识符，例如：”content:&#x2F;&#x2F;com.example.appname.provider&#x2F;table1” 它只要它主要由如下三个部分组成</p>
<ul>
<li>协议声明</li>
</ul>
<p> </p>
<p>      “content:&#x2F;&#x2F;“</p>
<ul>
<li>权限</li>
</ul>
<p> </p>
<p>      “com.jeff.databasetest.provider” 用作对不同程序的区分，一般都是使用程序的包名来命名</p>
<ul>
<li>路径</li>
</ul>
<p> </p>
<p>      “&#x2F;table1” 用于对同一程序中的不同的表作区分</p>
<p>利用Uri.parse()方法可以使内容URI字符转化成Uri对象</p>
<p>Uri uri &#x3D; Uri.parse(“content:&#x2F;&#x2F;com.example.appname.provider&#x2F;table1”);</p>
<ul>
<li>创建内容提供器</li>
</ul>
<p>内容过于琐碎，这里只贴一个数据库联系程序中内容提供者的例子代码：</p>
<p>public class DatabaseProvider extends ContentProvider {</p>
<p>    public static final int BOOK_DIR &#x3D; 0;</p>
<p>    public static final int BOOK_ITEM &#x3D; 1;</p>
<p>    public static final int CATEGORY_DIR &#x3D; 2;</p>
<p>    public static final int CATEGORY_ITEM &#x3D; 3;</p>
<p>    public static final String AUTHORITY &#x3D; “com.jeff.databasetest.provider”;</p>
<p>    private static UriMatcher uriMatcher;</p>
<p>    private MyDatabaseHelper dbHelper;</p>
<p>    static {</p>
<p>        uriMatcher &#x3D; new UriMatcher(UriMatcher.NO_MATCH);</p>
<p>        uriMatcher.addURI(AUTHORITY, “book”, BOOK_DIR);</p>
<p>        uriMatcher.addURI(AUTHORITY, “book&#x2F;#”, BOOK_ITEM);</p>
<p>        uriMatcher.addURI(AUTHORITY, “category”, CATEGORY_DIR);</p>
<p>        uriMatcher.addURI(AUTHORITY, “category&#x2F;#”, CATEGORY_ITEM);</p>
<p>    }</p>
<p>    @Override</p>
<p>    public boolean onCreate() {</p>
<p>        dbHelper &#x3D; new MyDatabaseHelper(getContext(), “BookStore.db”, null, 2);</p>
<p>        return true;</p>
<p>    }</p>
<p>    @Override</p>
<p>    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {</p>
<p>        SQLiteDatabase db &#x3D; dbHelper.getWritableDatabase();</p>
<p>        Cursor cursor &#x3D; null;</p>
<p>        switch (uriMatcher.match(uri)) {</p>
<p>            case BOOK_DIR:</p>
<p>                cursor &#x3D; db.query(“Book”, projection, selection, selectionArgs, null, null, sortOrder);</p>
<p>                break;</p>
<p>            case BOOK_ITEM:</p>
<p>                String bookId &#x3D; uri.getPathSegments().get(1);</p>
<p>                cursor &#x3D; db.query(“Book”, projection, “id &#x3D; ?”, new String[]{“bookId”}, null, null, sortOrder);</p>
<p>                break;</p>
<p>            case CATEGORY_DIR:</p>
<p>                cursor &#x3D; db.query(“Category”, projection, selection, selectionArgs, null, null, sortOrder);</p>
<p>                break;</p>
<p>            case CATEGORY_ITEM:</p>
<p>                String categoryId &#x3D; uri.getPathSegments().get(1);</p>
<p>                cursor &#x3D; db.query(“Category”, projection, “id &#x3D; ?”, new String[]{categoryId}, null, null, sortOrder);</p>
<p>                break;</p>
<p>            default:</p>
<p>                break;</p>
<p>        }</p>
<p>        return cursor;</p>
<p>    }</p>
<p>    @Override</p>
<p>    public String getType(Uri uri) {</p>
<p>        switch (uriMatcher.match(uri)) {</p>
<p>            case BOOK_DIR:</p>
<p>            case CATEGORY_DIR:</p>
<p>                return “vnd.android.cursor.dir&#x2F;vnd.” + AUTHORITY + “.” + uri.getPathSegments().get(0);</p>
<p>            case BOOK_ITEM:</p>
<p>            case CATEGORY_ITEM:</p>
<p>                return “vnd.android.cursor.item&#x2F;vnd.” + AUTHORITY + “.” + uri.getPathSegments().get(0);</p>
<p>        }</p>
<p>        return null;</p>
<p>    }</p>
<p>    @Override</p>
<p>    public Uri insert(Uri uri, ContentValues values) {</p>
<p>        SQLiteDatabase db &#x3D; dbHelper.getWritableDatabase();</p>
<p>        Uri uriReturn &#x3D; null;</p>
<p>        switch (uriMatcher.match(uri)) {</p>
<p>            case BOOK_DIR:</p>
<p>            case BOOK_ITEM:</p>
<p>                long newBookId &#x3D; db.insert(“Book”, null, values);</p>
<p>                uriReturn &#x3D; Uri.parse(“content:&#x2F;&#x2F;“ + AUTHORITY + “&#x2F;book&#x2F;“ + newBookId);</p>
<p>                break;</p>
<p>            case CATEGORY_DIR:</p>
<p>            case CATEGORY_ITEM:</p>
<p>                long newCategoryId &#x3D; db.insert(“Category”, null, values);</p>
<p>                uriReturn &#x3D; Uri.parse(“content:&#x2F;&#x2F;“ + AUTHORITY + “&#x2F;category&#x2F;“ + newCategoryId);</p>
<p>                break;</p>
<p>            default:</p>
<p>        }</p>
<p>        return uriReturn;</p>
<p>    }</p>
<p>    @Override</p>
<p>    public int delete(Uri uri, String selection, String[] selectionArgs) {</p>
<p>        SQLiteDatabase db &#x3D; dbHelper.getWritableDatabase();</p>
<p>        int deletedRows &#x3D; 0;</p>
<p>        switch (uriMatcher.match(uri)) {</p>
<p>            case BOOK_DIR:</p>
<p>                deletedRows &#x3D; db.delete(“Book”, selection, selectionArgs);</p>
<p>                break;</p>
<p>            case BOOK_ITEM:</p>
<p>                String bookId &#x3D; uri.getPathSegments().get(1);</p>
<p>                deletedRows &#x3D; db.delete(“Book”, “id &#x3D; ?”, new String[]{bookId});</p>
<p>                break;</p>
<p>            case CATEGORY_DIR:</p>
<p>                deletedRows &#x3D; db.delete(“Category”, selection, selectionArgs);</p>
<p>                break;</p>
<p>            case CATEGORY_ITEM:</p>
<p>                String categoryId &#x3D; uri.getPathSegments().get(1);</p>
<p>                deletedRows &#x3D; db.delete(“Category”, “id &#x3D; ?”, new String[]{categoryId});</p>
<p>                break;</p>
<p>            default:</p>
<p>                break;</p>
<p>        }</p>
<p>        return deletedRows;</p>
<p>    }</p>
<p>    @Override</p>
<p>    public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {</p>
<p>        SQLiteDatabase db &#x3D; dbHelper.getWritableDatabase();</p>
<p>        int updatedRaws &#x3D; 0;</p>
<p>        switch (uriMatcher.match(uri)) {</p>
<p>            case BOOK_DIR:</p>
<p>                updatedRaws &#x3D; db.update(“Book”, values, selection, selectionArgs);</p>
<p>                break;</p>
<p>            case BOOK_ITEM:</p>
<p>                String bookId &#x3D; uri.getPathSegments().get(1);</p>
<p>                updatedRaws &#x3D; db.update(“Book”, values, “id &#x3D; ?”, new String[] {bookId});</p>
<p>                break;</p>
<p>            case CATEGORY_DIR:</p>
<p>                updatedRaws &#x3D; db.update(“Category”, values, selection, selectionArgs);</p>
<p>                break;</p>
<p>            case CATEGORY_ITEM:</p>
<p>                String categoryId &#x3D; uri.getPathSegments().get(1);</p>
<p>                updatedRaws &#x3D; db.update(“Category”, values, “id &#x3D; ?”, new String[]{categoryId});</p>
<p>                break;</p>
<p>            default:</p>
<p>                break;</p>
<p>        }</p>
<p>        return updatedRaws;</p>
<p>    }</p>
<p>}</p>
<p>同时，还得在AndroidManifes.xml中为自建的内容提供器注册，并表明外部程序是否可以访问（android:exported）：</p>
<p>&lt;provider</p>
<p>            android:authorities&#x3D;”com.jeff.databasetest.provider”</p>
<p>            android:name&#x3D;”.DatabaseProvider”</p>
<p>            android:exported&#x3D;”true” &#x2F;&gt;</p>
<ul>
<li><p>第08章 手机多媒体</p>
</li>
<li><p>使用通知</p>
</li>
<li><p>创建通知的步骤</p>
</li>
</ul>
<ol>
<li><p>获取NotificationManager的实例</p>
</li>
<li><p>创建一个Notification对象</p>
</li>
<li><p>对通知的布局进行设置</p>
</li>
<li><p>对通知的提醒方式（声音，震动，led灯）进行设置</p>
</li>
<li><p>设置好点击通知的动作（比如跳转到某个Activity）</p>
</li>
<li><p>调用NotificationManager的notify()方法让通知显示出来</p>
</li>
</ol>
<ul>
<li>具体代码</li>
</ul>
<p>&#x2F;&#x2F; 创建NotificationManager和Notification的实例</p>
<p>NotificationManager manager &#x3D; (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</p>
<p>Notification notification &#x3D; new Notification(R.mipmap.ic_launcher,</p>
<p>          “This is ticker text”, System.currentTimeMillis());</p>
<p>&#x2F;&#x2F; 设置通知铃声</p>
<p>Uri soundUri &#x3D; Uri.fromFile(new File(“&#x2F;system&#x2F;media&#x2F;audio&#x2F;notifications&#x2F;Adara.ogg”));</p>
<p>notification.sound &#x3D; soundUri;</p>
<p>&#x2F;&#x2F; 设置震动</p>
<p>long[] vibrates &#x3D; {0, 1000, 1000, 1000};</p>
<p>notification.vibrate &#x3D; vibrates;</p>
<p>&#x2F;&#x2F;设置LED灯</p>
<p>notification.ledARGB &#x3D; Color.GREEN;</p>
<p>notification.ledOnMS &#x3D; 1000;</p>
<p>notification.flags &#x3D; Notification.FLAG_SHOW_LIGHTS;</p>
<p>&#x2F;&#x2F;设置为系统默认方式</p>
<p>notification.defaults &#x3D; Notification.DEFAULT_ALL;</p>
<p>&#x2F;&#x2F;设置点击进行跳转</p>
<p>Intent intent &#x3D; new Intent(this, NotificationActivity.class);</p>
<p>PendingIntent pendingIntent &#x3D; PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);</p>
<p>notification.setLatestEventInfo(this, “This is content title”, “This is content text”, pendingIntent);</p>
<p>&#x2F;&#x2F;发送通知</p>
<p>manager.notify(1, notification);</p>
<ul>
<li>接收和发送短信</li>
</ul>
<p>当手机收到一条短信的时候就会发出一个值为”android.provider.Telephony.SMS_RECEIVED”的有序广播，这条广播里带着与短信有关的所有数据，所有应用都可以在广播接收器里对它进行监听，收到广播时再从中解析出短信的内容，甚至可以拦截短信。</p>
<ul>
<li>接收短信</li>
</ul>
<p>    class MsgReceiver extends BroadcastReceiver {</p>
<p>        @Override</p>
<p>        public void onReceive(Context context, Intent intent) {</p>
<p>            Bundle bundle &#x3D; intent.getExtras();</p>
<p>    &#x2F;&#x2F; 使用pdu密钥来提取一个 SMS pdus数组，其中每一个pdu字节都表示一条短信消息</p>
<p>            Object[] pdus &#x3D; (Object[]) bundle.get(“pdus”);</p>
<p>            SmsMessage[] messages &#x3D; new SmsMessage[pdus.length];</p>
<p>            for (int i &#x3D; 0; i &lt; messages.length; i++) {</p>
<p>                messages[i] &#x3D; SmsMessage.createFromPdu((byte[])pdus[i]);</p>
<p>            }</p>
<p>&#x2F;&#x2F; smsMessage的getOriginatingAddress()方法可以获取短信的发送方的地址</p>
<p>            String address &#x3D; messages[0].getOriginatingAddress();</p>
<p>            String fullMessage &#x3D; “”;</p>
<p>            for (SmsMessage message : messages) {</p>
<p>                fullMessage +&#x3D; message.getMessageBody();</p>
<p>            }</p>
<p>            sender.setText(address);</p>
<p>            content.setText(fullMessage);</p>
<p>&#x2F;&#x2F; 拦截短信，不让短信广播继续向优先级低的广播传播</p>
<p>            abortBroadcast();</p>
<p>        }</p>
<p>    }</p>
<ul>
<li>发送短信</li>
</ul>
<p>@Override</p>
<p>    protected void onCreate(Bundle savedInstanceState) {</p>
<p>…</p>
<p>to &#x3D; (EditText) findViewById(R.id.to);</p>
<p>        msgInput &#x3D; (EditText) findViewById(R.id.msg_input);</p>
<p>        send &#x3D; (Button) findViewById(R.id.send);</p>
<p>        sendFilter &#x3D; new IntentFilter();</p>
<p>        sendFilter.addAction(“SENT_SMS_ACTION”);</p>
<p>        sendStatusReceiver &#x3D; new SendStatusReceiver();</p>
<p>        registerReceiver(sendStatusReceiver, sendFilter);</p>
<p>        send.setOnClickListener(new View.OnClickListener() {</p>
<p>            @Override</p>
<p>            public void onClick(View v) {</p>
<p>                SmsManager smsManager &#x3D; SmsManager.getDefault();</p>
<p>                Intent sentIntent &#x3D; new Intent(“SENT_SMS_ACTION”);</p>
<p>                PendingIntent pendingIntent &#x3D; PendingIntent.getBroadcast(MainActivity.this, 0, sentIntent, 0);</p>
<p>                smsManager.sendTextMessage(to.getText().toString(), null,</p>
<p>                msgInput.getText().toString(), pendingIntent, null);</p>
<p>            }</p>
<p>        });</p>
<p>…</p>
<p>}</p>
<p>&#x2F;&#x2F; 确认短信已经发出</p>
<p>    class SendStatusReceiver extends BroadcastReceiver {</p>
<p>        @Override</p>
<p>        public void onReceive(Context context, Intent intent) {</p>
<p>            if (getResultCode() &#x3D;&#x3D; RESULT_OK) {</p>
<p>                Toast.makeText(context, “Send succeeded”, Toast.LENGTH_SHORT).show();</p>
<p>            } else {</p>
<p>                Toast.makeText(context, “Send failed”, Toast.LENGTH_SHORT).show();</p>
<p>            }</p>
<p>        }</p>
<p>    }</p>
<ul>
<li>调用摄像头和相册</li>
</ul>
<p>    public static final int TAKE_PHOTO &#x3D; 0;</p>
<p>    public static final int CROP_PHOTO &#x3D; 1;</p>
<p>    private Button btnTakePhoto;</p>
<p>    private Button btnChooseFromAlbum;</p>
<p>    private ImageView picture;</p>
<p>    private Uri imageUri;</p>
<p>    @Override</p>
<p>    protected void onCreate(Bundle savedInstanceState) {</p>
<p>        super.onCreate(savedInstanceState);</p>
<p>        setContentView(R.layout.activity_main);</p>
<p>        btnTakePhoto &#x3D; (Button) findViewById(R.id.btn_take_photo);</p>
<p>        btnChooseFromAlbum &#x3D; (Button) findViewById(R.id.btn_choose_from_album);</p>
<p>        picture &#x3D; (ImageView) findViewById(R.id.picture);</p>
<p>&#x2F;&#x2F; 调用摄像头拍取照片</p>
<p>        btnTakePhoto.setOnClickListener(new View.OnClickListener() {</p>
<p>            @Override</p>
<p>            public void onClick(View v) {</p>
<p>                File outputImage &#x3D; new File(Environment.getExternalStorageDirectory(), “output_image.jpg”);</p>
<p>                try {</p>
<p>                    if (outputImage.exists()) {</p>
<p>                        outputImage.delete();</p>
<p>                    }</p>
<p>                    outputImage.createNewFile();</p>
<p>                } catch (IOException e) {</p>
<p>                    e.printStackTrace();</p>
<p>                }</p>
<p>                imageUri &#x3D; Uri.fromFile(outputImage);</p>
<p>                Intent intent &#x3D; new Intent(“android.media.action.IMAGE_CAPTURE”);</p>
<p>                intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);</p>
<p>                startActivityForResult(intent, TAKE_PHOTO);</p>
<p>            }</p>
<p>        });</p>
<p>&#x2F;&#x2F; 从相册中挑选照片</p>
<p>        btnChooseFromAlbum.setOnClickListener(new View.OnClickListener() {</p>
<p>            @Override</p>
<p>            public void onClick(View v) {</p>
<p>                File outputImage &#x3D; new File(Environment.getExternalStorageDirectory(), “output_image.jpg”);</p>
<p>                try {</p>
<p>                    if (outputImage.exists()) {</p>
<p>                        outputImage.delete();</p>
<p>                    }</p>
<p>                    outputImage.createNewFile();</p>
<p>                } catch (IOException e) {</p>
<p>                    e.printStackTrace();</p>
<p>                }</p>
<p>                imageUri &#x3D; Uri.fromFile(outputImage);</p>
<p>                Intent intent &#x3D; new Intent(“android.intent.action.GET_CONTENT”);</p>
<p>                intent.setType(“image&#x2F;*”);</p>
<p>                intent.putExtra(“crop”, true);</p>
<p>                intent.putExtra(“scale”, true);</p>
<p>                intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);</p>
<p>                startActivityForResult(intent, CROP_PHOTO);</p>
<p>            }</p>
<p>        });</p>
<p>    }</p>
<p>    @Override</p>
<p>    protected void onActivityResult(int requestCode, int resultCode, Intent data) {</p>
<p>        switch (requestCode) {</p>
<p>&#x2F;&#x2F;拍照后对拍摄的照片进行剪裁</p>
<p>            case TAKE_PHOTO:</p>
<p>                if (resultCode &#x3D;&#x3D; RESULT_OK) {</p>
<p>                    Intent intent &#x3D; new Intent(“com.android.camera.action.CROP”);</p>
<p>                    intent.setDataAndType(imageUri, “image&#x2F;*”);</p>
<p>                    intent.putExtra(“scale”, true);</p>
<p>                    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);</p>
<p>                    startActivityForResult(intent, CROP_PHOTO);</p>
<p>                }</p>
<p>                break;</p>
<p>&#x2F;&#x2F; 剪裁完后的图片会被设为ImageView的资源</p>
<p>            case CROP_PHOTO:</p>
<p>                if (resultCode &#x3D;&#x3D; RESULT_OK) {</p>
<p>                    try {</p>
<p>                        Bitmap bitmap &#x3D; BitmapFactory.decodeStream(getContentResolver().openInputStream(imageUri));</p>
<p>                        picture.setImageBitmap(bitmap);</p>
<p>                    } catch (FileNotFoundException e) {</p>
<p>                        e.printStackTrace();</p>
<p>                    }</p>
<p>                }</p>
<p>                break;</p>
<p>            default:</p>
<p>                break;</p>
<p>        }</p>
<p>    }</p>
<ul>
<li><p>播放多媒体文件</p>
</li>
<li><p>播放音频</p>
</li>
</ul>
<p>Android中播放音频一般都是使用MediaPlayer类来实现的，MediaPlayer提供了一些较为常用的控制方法。</p>
<ul>
<li>播放视频</li>
</ul>
<p>Android中系统提供了VideoView来播放少数几个格式的视频。</p>
<ul>
<li>第09章 服务Service</li>
</ul>
<p>服务（Service）是Android中实现程序后台运行的解决方案，它非常适合去执行那些不需要和用户交互还要求长期执行的任务。</p>
<p>但是，服务不是运行在一个独立的进程中的，而是依赖于创建服务时，所在的应用程序进程，当某个应用进程被杀掉时，所偶依赖于该进程的服务也会停止运行。</p>
<p>另外也不要被服务的后台属性给迷惑，实际上服务是不会自己自动开启线程的，所有的代码其实还是运行在主线程中的。也就是说，我们要在服务里手动创建线程去完成任务，否则很可能会造成主线程的堵塞</p>
<ul>
<li><p>Android的多线程编程</p>
</li>
<li><p>线程的三种创建方式</p>
</li>
<li><p>新建一个类去继承Thread类，并重写父类的run()方法</p>
</li>
</ul>
<p>代码如下所示：</p>
<p>class MyThread extends Thread {</p>
<p>    @Override</p>
<p>    public void run(){</p>
<p>        &#x2F;&#x2F;  处理具体的逻辑</p>
<p>    }</p>
<p>}</p>
<p>然后在要启动线程的时候写下如下代码：</p>
<p>new MyThread().start()</p>
<ul>
<li>实现Runnable接口</li>
</ul>
<p>让一个类实现Runnable接口：</p>
<p>class MyThread implements Runnable {</p>
<p>    @Override</p>
<p>    public void run(){</p>
<p>        &#x2F;&#x2F; 处理具体的逻辑</p>
<p>    }</p>
<p>}</p>
<p>启动线程的方法：</p>
<p>MyThread myThread &#x3D; new MyThread();</p>
<p>newThread(myThread).start();</p>
<ul>
<li>匿名类（最为常见）</li>
</ul>
<p>代码如下，记得不要漏了后面的.start()</p>
<p>new Thread(new Runnable(){</p>
<p>    @Override</p>
<p>    public void run(){</p>
<p>        &#x2F;&#x2F; 处理具体的逻辑</p>
<p>    }</p>
<p>}).start();</p>
<p>PS：在public void run(){}中写入stopSelf()后，线程会在执行完任务后自动销毁。</p>
<ul>
<li>在子线程中更新UI</li>
</ul>
<p>Android的UI是线程不安全的，想要更新应用程序中的UI元素，则必须在主线程中进行，否则就会出现异常。要想在子线程中对UI进行改变，可以采取异步消息处理的方法或者AsyncTask</p>
<ul>
<li><p>异步消息处理的方法</p>
</li>
<li><p>例子</p>
</li>
</ul>
<p>public class MainActivity extends Activity implements OnClickListener {</p>
<p>public static final int UPDATE_TEXT &#x3D; 1;</p>
<p>private TextView text;</p>
<p>private Button changeText;</p>
<p>private Handler handler &#x3D; new Handler() {</p>
<p>public void handleMessage(Message msg) {</p>
<p>switch (msg.what) {</p>
<p>case UPDATE_TEXT:</p>
<p>text.setText(“Nice to meet you”);</p>
<p>break;</p>
<p>default:</p>
<p>break;</p>
<p>}</p>
<p>}</p>
<p>};</p>
<p>@Override</p>
<p>protected void onCreate(Bundle savedInstanceState) {</p>
<p>super.onCreate(savedInstanceState);</p>
<p>setContentView(R.layout.activity_main);</p>
<p>text &#x3D; (TextView) findViewById(R.id.text);</p>
<p>changeText &#x3D; (Button) findViewById(R.id.change_text);</p>
<p>changeText.setOnClickListener(this);</p>
<p>}</p>
<p>@Override</p>
<p>public void onClick(View v) {</p>
<p>switch (v.getId()) {</p>
<p>case R.id.change_text:</p>
<p>new Thread(new Runnable() {</p>
<p>@Override</p>
<p>public void run() {</p>
<p>Message message &#x3D; new Message();</p>
<p>message.what &#x3D; UPDATE_TEXT;</p>
<p>handler.sendMessage(message);</p>
<p>}</p>
<p>}).start();</p>
<p>break;</p>
<p>default:</p>
<p>break;</p>
<p>}</p>
<p>}</p>
<p>}</p>
<ul>
<li>异步消息处理机制</li>
</ul>
<p>Android中的异步消息处理主要由四个部分组成</p>
<ul>
<li>Message</li>
</ul>
<p>Message是线程之间传递的消息，它可以再内部携带少量的信息，用于不同线程之间的交换数据。在上面的例子中我们使用到了 Message 的 what 字段， 除此之外还可以使用 arg1 和 arg2 字段来携带一些整形数据，使用 obj 字段来携带一个 Object 对象。</p>
<ul>
<li>Handler</li>
</ul>
<p>Handler 顾名思义也就是处理者的意思，它主’用于发送和处理消息的，发送消息一般使用 Handler 的 sendMessage() 方法， 发出的消息经过一系列的辗转处理后，最终会传递到 Handler 的 HandlerMessage() 方法中。</p>
<ul>
<li>MessageQueue</li>
</ul>
<p>MessageQueue 是消息队列，它用来存放所有通过Handler发送的消息。这些消息会一直呆在 MessageQueue中等待被处理。每一个线程中只会有一个MessageQueue对象。</p>
<ul>
<li>Looper</li>
</ul>
<p>Looper 是每个线程中 MessageQueue 的管家，调用Looper的loop()方法后，就会进入到一个无限循环中，然后每当发现 MessageQueue中存在消息，就会将它取出，并传递到 Handler 的 handlerMessage() 方法中。每个线程也只会有一个Looper</p>
<ul>
<li><p>AsyncTask</p>
</li>
<li><p>定义一个服务</p>
</li>
</ul>
<p>新建一个类继承Service， 并重写父类的 onBind(Intent intent)方法具体代码如下</p>
<p>public class MyService extends Service {</p>
<p>@Override</p>
<p>public IBinder onBind(Intent intent) {</p>
<p>return null;</p>
<p>}</p>
<p>@Override</p>
<p>public void onCreate() {</p>
<p>super.onCreate();</p>
<p>Log.d(“MyService”, “onCreate executed”);</p>
<p>}</p>
<p>@Override</p>
<p>public int onStartCommand(Intent intent, int flags, int startId) {</p>
<p>Log.d(“MyService”, “onStartCommand executed”);</p>
<p>return super.onStartCommand(intent, flags, startId);</p>
<p>}</p>
<p>@Override</p>
<p>public void onDestroy() {</p>
<p>super.onDestroy();</p>
<p>Log.d(“MyService”, “onDestroy executed”);</p>
<p>}</p>
<p>}</p>
<p>在上面的代码中重写了服务中最常用的三个方法：onCreate(), onStartCommand(), onDestory()。其中onCreate()会在服务被创建的时候被调用，onStartCommand()会在服务启动时被调用，而onDestory()则是在服务被销毁的时候被调用。其中，服务第一次启动后假如没有执行onDestory()那么再次启动它的时候不会再调用onCreate()  方法，但是还是会调用onStartCommand()方法，而无论调用多少次 onStartCommand()  方法， 服务都只会存在一个实例。</p>
<p>每一个服务都要在AndroidManifest.xml中注册才行</p>
<service android:name=".MyService">

<ul>
<li>启动和停止服务</li>
</ul>
<p>case R.id.start_service:</p>
<p>Intent startIntent &#x3D; new Intent(this, MyService.class);</p>
<p>startService(startIntent);</p>
<p>break;</p>
<p>case R.id.stop_service:</p>
<p>Intent stopIntent &#x3D; new Intent(this, MyService.class);</p>
<p>stopService(stopIntent);</p>
<p>break;</p>
<ul>
<li>活动和服务进行通信</li>
</ul>
<p>活动和服务的通信可以通过用Binder来将活动和服务绑定来解决</p>
<p>在Service中的代码如下：</p>
<p>public class MyService extends Service {</p>
<p>private DownloadBinder mBinder &#x3D; new DownloadBinder();</p>
<p>class DownloadBinder extends Binder {</p>
<p>public void startDownload() {</p>
<p>new Thread(new Runnable() {</p>
<p>@Override</p>
<p>public void run() {</p>
<p>&#x2F;&#x2F; start downloading</p>
<p>}</p>
<p>}).start();</p>
<p>Log.d(“MyService”, “startDownload executed”);</p>
<p>}</p>
<p>public int getProgress() {</p>
<p>Log.d(“MyService”, “getProgress executed”);</p>
<p>return 0;</p>
<p>}</p>
<p>}</p>
<p>@Override</p>
<p>public IBinder onBind(Intent intent) {</p>
<p>Log.d(“MyService”, “onBind executed”);</p>
<p>return mBinder;</p>
<p>}</p>
<p>…</p>
<p>}</p>
<p>在启动服务代码所在的活动中写代码如下：</p>
<p>…</p>
<p>private MyService.DownloadBinder downloadBinder;</p>
<p>private ServiceConnection connection &#x3D; new ServiceConnection() {</p>
<p>@Override</p>
<p>public void onServiceDisconnected(ComponentName name) {</p>
<p>}</p>
<p>@Override</p>
<p>public void onServiceConnected(ComponentName name, IBinder service) {</p>
<p>downloadBinder &#x3D; (MyService.DownloadBinder) service;</p>
<p>downloadBinder.startDownload();</p>
<p>downloadBinder.getProgress();</p>
<p>}</p>
<p>};</p>
<p>…</p>
<p>@Override</p>
<p>public void onClick(View v) {</p>
<p>switch (v.getId()) {</p>
<p>…</p>
<p>case R.id.bind_service:</p>
<p>Intent bindIntent &#x3D; new Intent(this, MyService.class);</p>
<p>bindService(bindIntent, connection, BIND_AUTO_CREATE); </p>
<p>break;</p>
<p>case R.id.unbind_service:</p>
<p>unbindService(connection);</p>
<p>break;</p>
<p>…</p>
<p>default:</p>
<p>break;</p>
<p>}</p>
<p>}</p>
<ul>
<li>使用前台服务</li>
</ul>
<p>前台服务和后台服务最大的区别在于，它会一直有个正在运行的图标显示在系统的状态栏，下拉后可以看到详细信息，非常类似通知，比如天气应用显示在通知栏的天气信息就是前台服务。创建前台服务的其实挺简单的，示例代码如下：</p>
<p>public class MyService extends Service {</p>
<p>…</p>
<p>@Override</p>
<p>public void onCreate() {</p>
<p>super.onCreate();</p>
<p>Notification notification &#x3D; new Notification(R.drawable.ic_launcher,</p>
<p>“Notification comes”, System.currentTimeMillis());</p>
<p>Intent notificationIntent &#x3D; new Intent(this, MainActivity.class);</p>
<p>PendingIntent pendingIntent &#x3D; PendingIntent.getActivity(this, 0,</p>
<p>notificationIntent, 0);</p>
<p>notification.setLatestEventInfo(this, “This is title”, “This is content”,</p>
<p>pendingIntent);</p>
<p>startForeground(1, notification);</p>
<p>Log.d(“MyService”, “onCreate executed”);</p>
<p>}</p>
<p>…</p>
<p>}</p>
<p>可以看出，这个过程和创建通知几乎一模一样，就是最后不是使用NotificationManager来将通知显示出来，而是调用的 startForeground()方法，这个方法的第一个参数是通知的id。调用startForeground()方法就能让MyService变成一个前台服务，并在系统状态栏中显示出来</p>
<ul>
<li>使用IntentService</li>
</ul>
<p>使用Android提供的IntentService类可以简单地创建一个异步的，会自动停止的服务</p>
<p>-  第10章 网络技术</p>
<ul>
<li><p>WebView</p>
</li>
<li><p>使用Http协议访问网络</p>
</li>
<li><p>HttpURLConnection</p>
</li>
<li><p>HttpClient</p>
</li>
<li><p>解析XML格式数据</p>
</li>
<li><p>Pull解析方式</p>
</li>
<li><p>SAX解析方式</p>
</li>
<li><p>解析JSON格式数据</p>
</li>
<li><p>使用JSONObject</p>
</li>
<li><p>使用GSON</p>
</li>
<li><p>使用 Java 的回调机制来解决在线程里使用Http协议访问网络无返回结果的问题</p>
</li>
<li><p>疑惑</p>
</li>
</ul>
<p>这里记录一些我在看书过程中产生的疑问，我会抽时间去搜寻并了解他们，最后把我的解读放在下面</p>
<ul>
<li><p>Context到底是什么？</p>
</li>
<li><p>PendingIntent是什么？</p>
</li>
</ul>
</service>
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">主页</a></li>
        
          <li><a href="/archives/">文章</a></li>
        
          <li><a href="/photos/">照片</a></li>
        
          <li><a href="/tags/">标签</a></li>
        
          <li><a href="/categories/">分类</a></li>
        
          <li><a href="/about/">关于</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">第01章 启程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">Android系统架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">Android提供的东西</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">项目目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.</span> <span class="toc-text">日志工具Log</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">第02章 活动Activity</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.1.</span> <span class="toc-text">手动创建Activity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.2.</span> <span class="toc-text">使用Intent在Activity间跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.3.</span> <span class="toc-text">活动的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.4.</span> <span class="toc-text">活动的启动模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.4.1.</span> <span class="toc-text">standard</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.4.2.</span> <span class="toc-text">singleTop</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.4.3.</span> <span class="toc-text">singleTask</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.4.4.</span> <span class="toc-text">singleInstance</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.5.</span> <span class="toc-text">技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.5.1.</span> <span class="toc-text">隐藏标题栏</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.5.2.</span> <span class="toc-text">知晓当前是在哪一个活动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.5.3.</span> <span class="toc-text">随时随地地退出程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.5.4.</span> <span class="toc-text">启动活动的最佳写法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">第03章 UI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">控件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.2.</span> <span class="toc-text">基本布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.3.</span> <span class="toc-text">自定义控件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.3.1.</span> <span class="toc-text">引入布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.3.2.</span> <span class="toc-text">创建自定义控件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.4.</span> <span class="toc-text">难用的ListView</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.4.1.</span> <span class="toc-text">简单用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.4.2.</span> <span class="toc-text">定制ListView的界面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.4.3.</span> <span class="toc-text">提升ListView的效率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">3.4.4.</span> <span class="toc-text">ListView的点击事件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.5.</span> <span class="toc-text">单位和尺寸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.6.</span> <span class="toc-text">制作Nine-Patch图片</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">第04章 碎片Fragment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">第05章 广播Broadcast</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">5.1.</span> <span class="toc-text">接收系统广播</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.1.1.</span> <span class="toc-text">动态注册</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.1.2.</span> <span class="toc-text">静态注册</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">5.2.</span> <span class="toc-text">发送自定义广播</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.2.1.</span> <span class="toc-text">发送标准广播</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.2.2.</span> <span class="toc-text">发送有序广播</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">5.2.3.</span> <span class="toc-text">使用本地广播</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">第06章 数据持久化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">6.1.</span> <span class="toc-text">文件存储</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">6.1.1.</span> <span class="toc-text">将数据存储到文件中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">6.1.2.</span> <span class="toc-text">从文件中读取数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">6.2.</span> <span class="toc-text">SharedPreferences存储</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">6.2.1.</span> <span class="toc-text">将数据存储到SharePreferences中</span></a></li></ol></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://blog.hatcloud.me/post/43483/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://blog.hatcloud.me/post/43483/&text=《第一行代码》读书笔记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://blog.hatcloud.me/post/43483/&is_video=false&description=《第一行代码》读书笔记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=《第一行代码》读书笔记&body=Check out this article: http://blog.hatcloud.me/post/43483/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://blog.hatcloud.me/post/43483/&title=《第一行代码》读书笔记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://blog.hatcloud.me/post/43483/&name=《第一行代码》读书笔记&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://blog.hatcloud.me/post/43483/&t=《第一行代码》读书笔记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2024
    Hat_Cloud
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">主页</a></li><!--
     --><!--
       --><li><a href="/archives/">文章</a></li><!--
     --><!--
       --><li><a href="/photos/">照片</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     --><!--
       --><li><a href="/categories/">分类</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
